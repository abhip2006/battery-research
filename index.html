<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battery Intelligence Platform | US Industry Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #1C1C1C;
            color: #FFFFFF;
            line-height: 1.6;
        }

        /* Navigation */
        nav {
            background: #000000;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        nav .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav .logo {
            font-size: 1.75rem;
            font-weight: 700;
            color: #00C805;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
        }

        nav a {
            color: #FFFFFF;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 6px;
        }

        nav a:hover {
            color: #00C805;
            background: rgba(0, 200, 5, 0.1);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #000000 0%, #1C1C1C 50%, #2D2D2D 100%);
            padding: 4rem 2rem;
            text-align: center;
            border-bottom: 3px solid #00C805;
        }

        .hero h1 {
            font-size: 3rem;
            color: #00C805;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.25rem;
            color: #B3B3B3;
            margin-bottom: 2rem;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 2rem auto;
        }

        .stat-card {
            background: #2D2D2D;
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid #3D3D3D;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #00C805;
        }

        .stat-label {
            color: #B3B3B3;
            margin-top: 0.5rem;
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Section */
        .section {
            margin: 3rem 0;
        }

        .section-title {
            font-size: 2rem;
            color: #00C805;
            margin-bottom: 1rem;
        }

        .section-subtitle {
            color: #B3B3B3;
            margin-bottom: 2rem;
        }

        /* Chart Container */
        .chart-container {
            background: #2D2D2D;
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid #3D3D3D;
            margin: 1.5rem 0;
        }

        .chart-container canvas {
            max-height: 400px;
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        /* Cards */
        .card {
            background: #2D2D2D;
            border: 1px solid #3D3D3D;
            border-radius: 12px;
            padding: 1.5rem;
            transition: transform 0.3s, border-color 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: #00C805;
        }

        .card h3 {
            color: #00C805;
            margin-bottom: 1rem;
        }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            background: #2D2D2D;
            border-radius: 12px;
            overflow: hidden;
        }

        th {
            background: #000000;
            color: #00C805;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid #3D3D3D;
            color: #B3B3B3;
        }

        tr:hover {
            background: #3D3D3D;
        }

        /* RAG Chatbot */
        .chatbot-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }

        .chatbot-toggle {
            background: #00C805;
            color: #000000;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 200, 5, 0.4);
            transition: transform 0.3s;
        }

        .chatbot-toggle:hover {
            transform: scale(1.1);
        }

        .chatbot-window {
            display: none;
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 400px;
            height: 600px;
            background: #1C1C1C;
            border: 2px solid #00C805;
            border-radius: 12px;
            flex-direction: column;
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5);
        }

        .chatbot-window.active {
            display: flex;
        }

        .chatbot-header {
            background: #00C805;
            color: #000000;
            padding: 1rem;
            font-weight: 700;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .message {
            margin: 1rem 0;
            padding: 0.75rem;
            border-radius: 8px;
            max-width: 80%;
        }

        .message.user {
            background: #00C805;
            color: #000000;
            margin-left: auto;
        }

        .message.bot {
            background: #2D2D2D;
            color: #FFFFFF;
        }

        .chatbot-input {
            display: flex;
            padding: 1rem;
            border-top: 1px solid #3D3D3D;
        }

        .chatbot-input input {
            flex: 1;
            background: #2D2D2D;
            border: 1px solid #3D3D3D;
            color: #FFFFFF;
            padding: 0.75rem;
            border-radius: 8px;
            margin-right: 0.5rem;
        }

        .chatbot-input button {
            background: #00C805;
            color: #000000;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Insights Box */
        .insights-box {
            background: rgba(0, 200, 5, 0.1);
            border-left: 4px solid #00C805;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .insights-box h3 {
            color: #00C805;
            margin-bottom: 1rem;
        }

        .insights-box ul {
            list-style: none;
            padding-left: 0;
        }

        .insights-box li {
            padding: 0.5rem 0;
            color: #B3B3B3;
        }

        .insights-box li::before {
            content: "‚Üí ";
            color: #00C805;
            font-weight: bold;
        }

        /* Footer */
        footer {
            background: #000000;
            color: #B3B3B3;
            padding: 2rem;
            text-align: center;
            margin-top: 4rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }

            .chatbot-window {
                width: calc(100vw - 2rem);
                right: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="container">
            <div class="logo">‚ö° Battery Intel</div>
            <ul>
                <li><a href="index.html">Dashboard</a></li>
                <li><a href="#reports">Research Reports</a></li>
                <li><a href="companies.html">Companies</a></li>
                <li><a href="technology.html">Technology</a></li>
                <li><a href="policy.html">Policy</a></li>
                <li><a href="forecast.html">Forecast</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero -->
    <div class="hero">
        <h1>US Battery Industry Intelligence Platform</h1>
        <p>Comprehensive analysis of manufacturing capacity, technology evolution, and market dynamics</p>
        <div class="hero-stats">
            <div class="stat-card">
                <div class="stat-value">850</div>
                <div class="stat-label">GWh Capacity (2024)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">$115</div>
                <div class="stat-label">Cost per kWh (2024)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">100K+</div>
                <div class="stat-label">Direct Jobs by 2027</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">62</div>
                <div class="stat-label">Companies Mapped</div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Cost Trends -->
        <div class="section">
            <h2 class="section-title">Battery Cost Evolution (2015-2030)</h2>
            <p class="section-subtitle">81% cost reduction achieved from 2015 to 2024</p>
            <div class="chart-container">
                <canvas id="costChart"></canvas>
            </div>
            <div class="insights-box">
                <h3>Key Insights</h3>
                <ul>
                    <li>Dramatic 81% cost reduction from $600/kWh (2015) to $115/kWh (2024)</li>
                    <li>Crossed critical $100/kWh threshold enabling BEV price parity</li>
                    <li>Projected to reach $69/kWh by 2030</li>
                    <li>Cost floor approaching $50-60/kWh due to material limits</li>
                </ul>
            </div>
        </div>

        <!-- Capacity Growth -->
        <div class="section">
            <h2 class="section-title">Manufacturing Capacity Growth</h2>
            <p class="section-subtitle">Exponential expansion of US battery production capacity</p>
            <div class="chart-container">
                <canvas id="capacityChart"></canvas>
            </div>
            <div class="insights-box">
                <h3>Growth Trajectory</h3>
                <ul>
                    <li>85x increase from 10 GWh (2015) to 850 GWh (2024)</li>
                    <li>Projected 1,500 GWh by 2030 - sufficient for ~10M EVs annually</li>
                    <li>Major acceleration post-2020 driven by IRA incentives</li>
                    <li>60+ announced manufacturing facilities across 15+ states</li>
                </ul>
            </div>
        </div>

        <!-- Top Companies -->
        <div class="section">
            <h2 class="section-title">Leading Battery Manufacturers</h2>
            <p class="section-subtitle">Top 10 companies by announced US capacity</p>
            <div class="grid-2">
                <div class="chart-container">
                    <canvas id="companiesChart"></canvas>
                </div>
                <div class="card">
                    <h3>Market Leaders</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Company</th>
                                <th>Capacity</th>
                            </tr>
                        </thead>
                        <tbody id="companiesTable"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- State Rankings -->
        <div class="section">
            <h2 class="section-title">Manufacturing Capacity by State</h2>
            <p class="section-subtitle">Geographic distribution of battery production</p>
            <div class="chart-container">
                <canvas id="statesChart"></canvas>
            </div>
            <div class="insights-box">
                <h3>Regional Clusters</h3>
                <ul>
                    <li>Southeast Automotive Corridor: 500+ GWh (GA, TN, KY, NC, SC)</li>
                    <li>Midwest Battery Belt: 200+ GWh (MI, OH, IN)</li>
                    <li>Nevada Lithium Complex: 120+ GWh (vertical integration)</li>
                    <li>Nevada leads with 120 GWh, followed by Tennessee (95 GWh)</li>
                </ul>
            </div>
        </div>

        <!-- Technology Mix -->
        <div class="section">
            <h2 class="section-title">Battery Chemistry Evolution</h2>
            <p class="section-subtitle">Technology mix trends and future projections</p>
            <div class="grid-2">
                <div class="chart-container">
                    <canvas id="technologyMixChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="energyDensityChart"></canvas>
                </div>
            </div>
            <div class="insights-box">
                <h3>Technology Trends</h3>
                <ul>
                    <li>LFP Resurgence: Growing from 8% (2015) to 40% (2024) market share</li>
                    <li>NMC Evolution: Transitioning to high-nickel NMC-811 variants</li>
                    <li>Solid-State: Expected 10% market share by 2030 (delayed from 2025)</li>
                    <li>Sodium-Ion: Emerging alternative for cost-sensitive applications</li>
                    <li>Energy Density: 75% improvement for LFP, 50% for NMC (2015-2024)</li>
                </ul>
            </div>
        </div>

        <!-- Market Share Evolution -->
        <div class="section">
            <h2 class="section-title">Chemistry Market Share Evolution</h2>
            <p class="section-subtitle">Distribution across key milestone years</p>
            <div class="grid-2">
                <div class="chart-container">
                    <h3 style="color: #00C805; text-align: center; margin-bottom: 1rem;">2024 Market Share</h3>
                    <canvas id="marketShare2024"></canvas>
                </div>
                <div class="chart-container">
                    <h3 style="color: #00C805; text-align: center; margin-bottom: 1rem;">2030 Projected Share</h3>
                    <canvas id="marketShare2030"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Research Reports Section -->
    <div class="container">
        <div class="section" id="reports">
            <h2 class="section-title">üìö Comprehensive Research Reports</h2>
            <p class="section-subtitle">Access detailed analysis, data, and insights from our multi-agent research platform</p>

            <div class="grid-3">
                <!-- Research Intelligence Reports -->
                <div class="card">
                    <h3>üè≠ Industry Mapping Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">62 companies cataloged across the U.S. battery ecosystem with complete profiles, technology classifications, and capacity data.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">1,146 lines | Agent R01</p>
                    <a href="US_Battery_Industry_Mapping_Report.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>üí∞ Financial Intelligence Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">SEC filing analysis, ownership structures, capital flows, and financial health metrics for public companies.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">Agent R02</p>
                    <a href="agent-outputs/AGENT-R02-Financial-Intelligence-SEC-Analysis-Report.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>‚öñÔ∏è Policy & Regulatory Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">IRA incentives, DOE programs, state policies, and political risk analysis with scenario modeling.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">Agent R03</p>
                    <a href="agent-outputs/AGENT-R03_Policy_Regulatory_Intelligence_Report.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>üî¨ Technology Innovation Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">Battery chemistry evolution, cost curves, energy density trends, and commercialization timelines.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">710 lines | Agent R04</p>
                    <a href="technology-innovation-report.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>üìú Historical Evolution Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">60+ milestones from 2000-2024 tracking policy interventions, company lifecycles, and industry evolution.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">608 lines | Agent R05</p>
                    <a href="US_Battery_Industry_Historical_Evolution_2000-2024.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>üó∫Ô∏è Geospatial & Facilities Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">30+ gigafactories mapped across 15 states with regional cluster analysis and capacity data.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">864 lines | Agent R06</p>
                    <a href="geospatial-manufacturing-facilities-report.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>üìà Market Forecast Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">2024-2030+ demand/supply forecasts with policy scenarios and inflection point analysis.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">Agent R07 | Includes CSV data</p>
                    <a href="agent-outputs/AGENT-R07-Market-Forecast-Report.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>‚õìÔ∏è Supply Chain Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">Critical materials analysis (lithium, graphite, cobalt) with import dependencies and risk assessment.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">Agent R08 | Includes CSV data</p>
                    <a href="agent-outputs/AGENT-R08-Supply-Chain-Critical-Materials-Report.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>üéØ Comprehensive Synthesis Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">Executive summary integrating all research with strategic insights for investors, policymakers, and industry.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">1,300+ lines | Agent C02</p>
                    <a href="AGENT-C02-COMPREHENSIVE-SYNTHESIS-REPORT.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>‚úÖ Source Verification Report</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">Quality audit of 539 source citations with confidence scoring and data integrity analysis.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">Agent D01 | 0.91 avg confidence</p>
                    <a href="SOURCE_VERIFICATION_REPORT.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>üéâ Mission Complete Summary</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">Project overview documenting all deliverables, platform components, and deployment status.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">Platform Documentation</p>
                    <a href="MISSION_COMPLETE.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Report ‚Üí</a>
                </div>

                <div class="card">
                    <h3>üîç Quick Start Guide</h3>
                    <p style="color: #B3B3B3; margin-bottom: 1rem;">Platform setup instructions, API documentation, and deployment guides for local and production use.</p>
                    <p style="color: #888; font-size: 0.875rem; margin-bottom: 1rem;">Documentation</p>
                    <a href="QUICKSTART.md" style="color: #00C805; text-decoration: none; font-weight: 600;">View Guide ‚Üí</a>
                </div>
            </div>

            <div style="margin-top: 3rem; padding: 2rem; background: #2D2D2D; border-radius: 12px; border: 2px solid #00C805;">
                <h3 style="color: #00C805; margin-bottom: 1rem;">üìä Additional Resources</h3>
                <div class="grid-2">
                    <div>
                        <h4 style="color: #FFFFFF; margin-bottom: 0.5rem;">Platform Components</h4>
                        <ul style="color: #B3B3B3; line-height: 2;">
                            <li><a href="RAG_CHATBOT_README.md" style="color: #00C805;">RAG Chatbot Documentation</a></li>
                            <li><a href="SEARCH_README.md" style="color: #00C805;">Search Engine Guide</a></li>
                            <li><a href="VISUALIZATION-README.md" style="color: #00C805;">Visualization Library</a></li>
                            <li><a href="backend/API_DOCUMENTATION.md" style="color: #00C805;">API Documentation</a></li>
                            <li><a href="frontend/README.md" style="color: #00C805;">Frontend Guide</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #FFFFFF; margin-bottom: 0.5rem;">Alternative Views</h4>
                        <ul style="color: #B3B3B3; line-height: 2;">
                            <li><a href="index-enhanced.html" style="color: #00C805;">Enhanced Dashboard (Advanced Charts)</a></li>
                            <li><a href="search-interface.html" style="color: #00C805;">Search Interface</a></li>
                            <li><a href="chat-widget.html" style="color: #00C805;">Standalone RAG Chatbot</a></li>
                            <li><a href="companies.html" style="color: #00C805;">Companies Deep Dive</a></li>
                            <li><a href="technology.html" style="color: #00C805;">Technology Analysis</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div style="margin-top: 2rem; text-align: center;">
                <p style="color: #B3B3B3; font-size: 1.125rem;">
                    <strong style="color: #00C805;">Total Research Output:</strong>
                    11,359 lines of analysis | 539 verified sources | 0.91 average confidence score | 62 companies cataloged
                </p>
            </div>
        </div>
    </div>

    <!-- RAG Chatbot -->
    <div class="chatbot-container">
        <button class="chatbot-toggle" id="chatToggle">üí¨</button>
        <div class="chatbot-window" id="chatWindow">
            <div class="chatbot-header">
                <span>Battery Research Assistant</span>
                <button style="background: none; border: none; color: #000; cursor: pointer; font-size: 1.25rem;" onclick="document.getElementById('chatWindow').classList.remove('active')">√ó</button>
            </div>
            <div class="chatbot-messages" id="chatMessages">
                <div class="message bot">
                    Hello! I'm your Battery Industry Research Assistant. I can help you analyze the US battery manufacturing landscape, technology trends, policy impacts, and market forecasts. Ask me anything about:
                    <ul style="margin-top: 0.5rem;">
                        <li>Company capacity and rankings</li>
                        <li>Cost trends and projections</li>
                        <li>Technology evolution (LFP, NMC, solid-state)</li>
                        <li>IRA incentives and policy</li>
                        <li>Regional manufacturing clusters</li>
                    </ul>
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatInput" placeholder="Ask about battery industry data..." />
                <button id="chatSend">Send</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Battery Intelligence Platform | Data verified against SEC filings, DOE announcements, and company reports</p>
        <p style="margin-top: 0.5rem; font-size: 0.875rem;">Last Updated: November 2024 | Quarterly updates recommended</p>
    </footer>

    <!-- JavaScript -->
    <script>
        // Chart.js default config
        Chart.defaults.color = '#B3B3B3';
        Chart.defaults.borderColor = '#3D3D3D';

        // Data
        const costData = [
            {year: 2015, cost: 600}, {year: 2016, cost: 540}, {year: 2017, cost: 480},
            {year: 2018, cost: 420}, {year: 2019, cost: 156}, {year: 2020, cost: 137},
            {year: 2021, cost: 155}, {year: 2022, cost: 161}, {year: 2023, cost: 150},
            {year: 2024, cost: 115}, {year: 2025, cost: 112}, {year: 2026, cost: 98},
            {year: 2028, cost: 80}, {year: 2030, cost: 69}
        ];

        const capacityData = [
            {year: 2015, capacity: 10}, {year: 2016, capacity: 20}, {year: 2017, capacity: 40},
            {year: 2018, capacity: 90}, {year: 2019, capacity: 180}, {year: 2020, capacity: 350},
            {year: 2021, capacity: 450}, {year: 2022, capacity: 650}, {year: 2023, capacity: 750},
            {year: 2024, capacity: 850}, {year: 2025, capacity: 950}, {year: 2026, capacity: 1050},
            {year: 2027, capacity: 1200}, {year: 2030, capacity: 1500}
        ];

        const topCompanies = [
            {name: "SK Battery America", capacity: 180},
            {name: "LG Energy Solution", capacity: 170},
            {name: "Panasonic Energy", capacity: 140},
            {name: "Ultium Cells (GM-LG)", capacity: 130},
            {name: "BlueOval SK (Ford-SK)", capacity: 130},
            {name: "Tesla", capacity: 110},
            {name: "StarPlus Energy", capacity: 70},
            {name: "FREYR Battery", capacity: 50},
            {name: "Gotion High-Tech", capacity: 50},
            {name: "Rivian", capacity: 50}
        ];

        const stateData = [
            {state: "Nevada", capacity: 120},
            {state: "Tennessee", capacity: 95},
            {state: "Kentucky", capacity: 86},
            {state: "Ohio", capacity: 75},
            {state: "Indiana", capacity: 70},
            {state: "Michigan", capacity: 55},
            {state: "Illinois", capacity: 50},
            {state: "Arizona", capacity: 43},
            {state: "Georgia", capacity: 40}
        ];

        // Cost Chart
        new Chart(document.getElementById('costChart'), {
            type: 'line',
            data: {
                labels: costData.map(d => d.year),
                datasets: [{
                    label: 'Battery Pack Cost ($/kWh)',
                    data: costData.map(d => d.cost),
                    borderColor: '#00C805',
                    backgroundColor: 'rgba(0, 200, 5, 0.1)',
                    tension: 0.4,
                    fill: true,
                    pointRadius: 5,
                    pointBackgroundColor: '#00C805'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#FFFFFF', font: { size: 14 } } }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: '$/kWh', color: '#FFFFFF' },
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    },
                    x: {
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    }
                }
            }
        });

        // Capacity Chart
        new Chart(document.getElementById('capacityChart'), {
            type: 'bar',
            data: {
                labels: capacityData.map(d => d.year),
                datasets: [{
                    label: 'US Manufacturing Capacity (GWh)',
                    data: capacityData.map(d => d.capacity),
                    backgroundColor: '#00C805',
                    borderColor: '#00C805',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#FFFFFF', font: { size: 14 } } }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'GWh', color: '#FFFFFF' },
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    },
                    x: {
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    }
                }
            }
        });

        // Companies Chart
        new Chart(document.getElementById('companiesChart'), {
            type: 'horizontalBar',
            data: {
                labels: topCompanies.map(c => c.name),
                datasets: [{
                    label: 'Announced Capacity (GWh)',
                    data: topCompanies.map(c => c.capacity),
                    backgroundColor: '#00C805'
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#FFFFFF', font: { size: 14 } } }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    },
                    y: {
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    }
                }
            }
        });

        // Populate Companies Table
        const tbody = document.getElementById('companiesTable');
        topCompanies.forEach((company, idx) => {
            tbody.innerHTML += `<tr>
                <td>${idx + 1}</td>
                <td>${company.name}</td>
                <td>${company.capacity} GWh</td>
            </tr>`;
        });

        // States Chart
        new Chart(document.getElementById('statesChart'), {
            type: 'bar',
            data: {
                labels: stateData.map(s => s.state),
                datasets: [{
                    label: 'Manufacturing Capacity (GWh)',
                    data: stateData.map(s => s.capacity),
                    backgroundColor: '#00C805'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#FFFFFF', font: { size: 14 } } }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'GWh', color: '#FFFFFF' },
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    },
                    x: {
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    }
                }
            }
        });

        // Technology Mix Chart
        new Chart(document.getElementById('technologyMixChart'), {
            type: 'line',
            data: {
                labels: ['2015', '2020', '2024', '2027', '2030'],
                datasets: [
                    {
                        label: 'LFP',
                        data: [8, 15, 40, 45, 40],
                        borderColor: '#0A84FF',
                        backgroundColor: 'rgba(10, 132, 255, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'NMC',
                        data: [85, 75, 50, 42, 35],
                        borderColor: '#FF9F0A',
                        backgroundColor: 'rgba(255, 159, 10, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Solid-State',
                        data: [0, 0, 0, 2, 10],
                        borderColor: '#AF52DE',
                        backgroundColor: 'rgba(175, 82, 222, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Sodium-Ion',
                        data: [0, 0, 0, 1, 10],
                        borderColor: '#00C805',
                        backgroundColor: 'rgba(0, 200, 5, 0.1)',
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#FFFFFF', font: { size: 12 } } }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Market Share (%)', color: '#FFFFFF' },
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    },
                    x: {
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    }
                }
            }
        });

        // Energy Density Chart
        new Chart(document.getElementById('energyDensityChart'), {
            type: 'line',
            data: {
                labels: ['2015', '2020', '2024', '2030'],
                datasets: [
                    {
                        label: 'LFP (Wh/kg)',
                        data: [95, 120, 160, 220],
                        borderColor: '#0A84FF',
                        backgroundColor: 'rgba(10, 132, 255, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'NMC (Wh/kg)',
                        data: [180, 240, 260, 310],
                        borderColor: '#FF9F0A',
                        backgroundColor: 'rgba(255, 159, 10, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Solid-State (Wh/kg)',
                        data: [null, null, 350, 450],
                        borderColor: '#AF52DE',
                        backgroundColor: 'rgba(175, 82, 222, 0.1)',
                        tension: 0.4,
                        borderDash: [5, 5]
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#FFFFFF', font: { size: 12 } } }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Wh/kg', color: '#FFFFFF' },
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    },
                    x: {
                        ticks: { color: '#B3B3B3' },
                        grid: { color: '#3D3D3D' }
                    }
                }
            }
        });

        // Market Share Pie Charts
        new Chart(document.getElementById('marketShare2024'), {
            type: 'doughnut',
            data: {
                labels: ['NMC', 'LFP', 'NCA', 'Other'],
                datasets: [{
                    data: [50, 40, 5, 5],
                    backgroundColor: ['#FF9F0A', '#0A84FF', '#AF52DE', '#B3B3B3'],
                    borderColor: '#1C1C1C',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { color: '#FFFFFF', font: { size: 12 } }
                    }
                }
            }
        });

        new Chart(document.getElementById('marketShare2030'), {
            type: 'doughnut',
            data: {
                labels: ['LFP/LMFP', 'NMC', 'Solid-State', 'Sodium-Ion', 'Other'],
                datasets: [{
                    data: [40, 35, 10, 10, 5],
                    backgroundColor: ['#0A84FF', '#FF9F0A', '#AF52DE', '#00C805', '#B3B3B3'],
                    borderColor: '#1C1C1C',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { color: '#FFFFFF', font: { size: 12 } }
                    }
                }
            }
        });

        // Chatbot Functionality
        document.getElementById('chatToggle').addEventListener('click', function() {
            document.getElementById('chatWindow').classList.toggle('active');
        });

        document.getElementById('chatSend').addEventListener('click', sendMessage);
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendMessage();
        });

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            const messagesDiv = document.getElementById('chatMessages');

            // Add user message
            messagesDiv.innerHTML += `<div class="message user">${message}</div>`;
            input.value = '';

            // Process query and generate response
            setTimeout(() => {
                const response = generateResponse(message.toLowerCase());
                messagesDiv.innerHTML += `<div class="message bot">${response}</div>`;
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            }, 500);
        }

        function generateResponse(query) {
            // RAG-like response generation based on research data
            if (query.includes('cost') || query.includes('price')) {
                return "Battery costs have dropped dramatically from $600/kWh in 2015 to $115/kWh in 2024 - an 81% reduction. We crossed the critical $100/kWh threshold this year, enabling price parity with ICE vehicles. Projections suggest $69/kWh by 2030, approaching the material cost floor of $50-60/kWh.";
            } else if (query.includes('lfp') || query.includes('lithium iron phosphate')) {
                return "LFP (Lithium Iron Phosphate) has seen remarkable growth, rising from 8% market share in 2015 to 40% in 2024. Key advantages: 20-30% cost advantage over NMC, 3,000+ cycle life (vs 1,300 for NMC), and superior safety. Major players include CATL, BYD, Gotion, and FREYR Battery. Tesla's Model 3/Y Standard Range now uses LFP.";
            } else if (query.includes('solid state') || query.includes('solidstate')) {
                return "Solid-state batteries remain in development with commercial timelines delayed. QuantumScape delivered B-samples to VW in October 2024, targeting 2027-2028 commercialization (delayed from 2024). Projected advantages: 400+ Wh/kg energy density (vs 260 for NMC), 5,000+ cycle life. However, cost parity not expected until 2032-2035. Market share projection: 10% by 2030.";
            } else if (query.includes('company') || query.includes('companies') || query.includes('manufacturer')) {
                return "Top US battery manufacturers by capacity: 1) SK Battery America (180 GWh) - JVs with Ford/Hyundai, 2) LG Energy Solution (170 GWh) - Ultium Cells with GM, 3) Panasonic Energy (140 GWh) - Tesla partnership, 4) Tesla (110 GWh) - vertical integration. Total: 62 companies mapped across the value chain.";
            } else if (query.includes('state') || query.includes('region') || query.includes('location')) {
                return "Three major manufacturing clusters: 1) Southeast Automotive Corridor (500+ GWh) - GA, TN, KY, NC, SC - driven by OEM integration, 2) Midwest Battery Belt (200+ GWh) - MI, OH, IN - historic auto expertise, 3) Nevada Lithium Complex (120+ GWh) - vertical integration with Tesla/Panasonic/Redwood. Nevada leads individual states with 120 GWh capacity.";
            } else if (query.includes('ira') || query.includes('incentive') || query.includes('policy')) {
                return "The Inflation Reduction Act provides significant incentives: Section 45X offers $35/kWh for cells and $10/kWh for modules. DOE has $50B+ in lending authority. State incentives include Georgia ($3.3B), Tennessee ($900M), and Michigan ($1.7B). Political risk score: 8/10 due to potential policy changes.";
            } else if (query.includes('capacity') || query.includes('gwh')) {
                return "US battery capacity has grown exponentially from 10 GWh in 2015 to 850 GWh in 2024 (85x increase). Projected to reach 1,500 GWh by 2030, sufficient for ~10 million EVs annually. Major acceleration post-2020 driven by IRA incentives and OEM commitments. 60+ manufacturing facilities across 15+ states.";
            } else if (query.includes('nmc') || query.includes('nickel manganese cobalt')) {
                return "NMC (Nickel Manganese Cobalt) currently holds 50% market share (down from 85% in 2015). Evolution from NMC-333 to NMC-811 reduces cobalt dependence. Key advantage: 260 Wh/kg energy density enables 300+ mile range. Market leaders: LG Energy Solution, SK On, Panasonic. Projected share: 35% by 2030 as LFP gains ground.";
            } else if (query.includes('sodium') || query.includes('na-ion')) {
                return "Sodium-ion batteries are emerging as a lithium-free alternative. Current market share: ~1% (2024). Projected: 5-10% by 2030. Key advantage: 15-25% cost advantage, no lithium/cobalt dependence. Energy density: 160 Wh/kg (comparable to LFP). Best suited for budget EVs, city cars, and short-duration grid storage. Leaders: CATL (Gen 1 production), Natron Energy (US).";
            } else if (query.includes('jobs') || query.includes('employment')) {
                return "The US battery industry is projected to create 100,000+ direct manufacturing jobs by 2027, with 300,000+ total jobs when including multiplier effects. Major employment hubs: Southeast Automotive Corridor (20,000 jobs), Midwest Battery Belt (12,000 jobs), Nevada Complex (10,000 jobs).";
            } else {
                return "I can help you with information about: battery costs, manufacturing capacity, technology trends (LFP, NMC, solid-state, sodium-ion), top companies, regional clusters, IRA policy, employment, and market forecasts. What would you like to know?";
            }
        }
    </script>
</body>
</html>
